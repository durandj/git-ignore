language: go

go:
  - 1.11.x
  - master

before_script:
  - go get -u -v github.com/go-task/task/cmd/task
  - task install

script: skip

jobs:
  include:
    - stage: test
      env:
        - GO111MODULE=on
      install: go get -u
      script:
        - task test

    - stage: deploy
      install: go get -u
      script:
        - task deploy
      if: branch = master
